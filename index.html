<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>âœˆï¸2026è¶Šå—7å¤©6å¤œâœˆï¸</title>
    <!-- å¼•å…¥ Tailwind CSS é€²è¡Œæ¨£å¼è¨­å®š -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* åŸºç¤è¨­å®š */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f3f4f6;
            color: #333;
            overscroll-behavior-y: none; /* é˜²æ­¢æ‰‹æ©Ÿä¸‹æ‹‰é‡æ•´ */
        }
        
        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* å®‰å…¨å€åŸŸè¨­å®š (é¿é–‹ç€æµ·èˆ‡åº•éƒ¨æ©«æ¢) */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .pt-safe-top { padding-top: max(env(safe-area-inset-top), 1rem); }

        /* å‹•ç•«æ•ˆæœ */
        .tab-content { display: none; opacity: 0; transition: opacity 0.2s ease-in-out; }
        .tab-content.active { display: block; opacity: 1; }
        
        /* æ–‡å­—å±•é–‹æ”¶åˆ */
        .desc-text {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            white-space: pre-wrap; /* ä¿ç•™æ›è¡Œ */
        }
        .desc-text.expanded {
            -webkit-line-clamp: unset;
        }
    </style>
</head>
<body class="h-[100dvh] flex flex-col overflow-hidden max-w-md mx-auto bg-gray-50 shadow-2xl relative">

    <!-- é ‚éƒ¨æ¨™é¡Œåˆ— -->
    <header class="bg-teal-700 text-white px-5 pt-safe-top pb-4 shadow-md z-20 shrink-0">
        <div class="flex justify-between items-center pt-2">
            <div>
                <h1 class="text-xl font-bold tracking-tight">2026 å³´æ¸¯ 7å¤©6å¤œ</h1>
                <p class="text-teal-100 text-sm opacity-90 mt-1">1/29 (å››) - 2/4 (ä¸‰)</p>
            </div>
            <!-- é›²ç«¯æ†‘è­‰æŒ‰éˆ• -->
            <a href="https://drive.google.com/drive/folders/1Bq2wuzbQWBVWhPaaxSokI7O7cNZOchXd" target="_blank" class="bg-white/10 hover:bg-white/20 p-2 rounded-full transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
            </a>
        </div>
    </header>

    <!-- ä¸»è¦å…§å®¹å€ (å¯æ²å‹•) -->
    <main id="app-container" class="flex-1 overflow-y-auto relative bg-gray-50 pb-24">
        <!-- é è¨­é¡¯ç¤ºè¼‰å…¥ä¸­ -->
        <div id="loading-msg" class="p-10 text-center text-gray-500">
            è³‡æ–™è¼‰å…¥ä¸­...<br>
            <span class="text-xs">(å¦‚æœé•·æ™‚é–“åœç•™åœ¨æ­¤ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ–æˆªåœ–å›å ±)</span>
        </div>
        
        <!-- è¡Œç¨‹ Tab -->
        <div id="view-itinerary" class="tab-content active">
            <!-- æ—¥æœŸé¸æ“‡å™¨ (Sticky) -->
            <div class="sticky top-0 z-10 bg-white/95 backdrop-blur-sm border-b border-gray-200 py-3 shadow-sm">
                <div id="day-selector" class="flex px-4 gap-3 overflow-x-auto hide-scrollbar">
                    <!-- JS ç”Ÿæˆæ—¥æœŸæŒ‰éˆ• -->
                </div>
            </div>
            <!-- è¡Œç¨‹åˆ—è¡¨å®¹å™¨ -->
            <div id="itinerary-list" class="p-4 space-y-4">
                <!-- JS ç”Ÿæˆè¡Œç¨‹å¡ç‰‡ -->
            </div>
        </div>

        <!-- ç­æ©Ÿ Tab -->
        <div id="view-flights" class="tab-content p-5 space-y-4">
            <!-- JS ç”Ÿæˆç­æ©Ÿè³‡è¨Š -->
        </div>

        <!-- ä½å®¿ Tab -->
        <div id="view-hotels" class="tab-content p-5 space-y-4">
            <!-- JS ç”Ÿæˆä½å®¿è³‡è¨Š -->
        </div>
    </main>

    <!-- åº•éƒ¨å°èˆªåˆ— -->
    <nav class="bg-white border-t border-gray-200 shrink-0 pb-safe z-30 fixed bottom-0 w-full max-w-md">
        <div class="flex justify-around items-center h-16">
            <button onclick="switchTab('itinerary')" id="btn-itinerary" class="nav-btn flex flex-col items-center justify-center w-full h-full text-teal-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                <span class="text-xs font-medium mt-1">è¡Œç¨‹</span>
            </button>
            <button onclick="switchTab('flights')" id="btn-flights" class="nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                <span class="text-xs font-medium mt-1">ç­æ©Ÿ</span>
            </button>
            <button onclick="switchTab('hotels')" id="btn-hotels" class="nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m8-2a2 2 0 100-4 2 2 0 000 4zm-6-4a2 2 0 110-4 2 2 0 010 4zm6-10a2 2 0 110-4 2 2 0 010 4zm-6 4a2 2 0 110-4 2 2 0 010 4z"></path></svg>
                <span class="text-xs font-medium mt-1">ä½å®¿</span>
            </button>
        </div>
    </nav>

    <!-- è…³æœ¬å€ï¼šè³‡æ–™èˆ‡é‚è¼¯ -->
    <script>
        // --- 1. è³‡æ–™å€ (Data) ---
        // ä½¿ç”¨ç´”è®Šæ•¸ï¼Œé¿å…ç‰¹æ®Šå­—å…ƒå¹²æ“¾
        const DATA = {
            flights: [
                { type: "å»ç¨‹", date: "1/29 (å››)", airline: "å°ç£è™èˆª IT 551", time: "17:25 - 19:10", from: "æ¡ƒåœ’æ©Ÿå ´ (T1)", to: "å³´æ¸¯æ©Ÿå ´", note: "èµ·é£›å‰ 48h-60m éœ€ç¶²è·¯å ±åˆ°" },
                { type: "å›ç¨‹", date: "2/4 (ä¸‰)", airline: "è¯èˆª CI 788", time: "10:20 - 14:05", from: "å³´æ¸¯æ©Ÿå ´ (T2)", to: "æ¡ƒåœ’æ©Ÿå ´ (T1)", note: "æ©Ÿå‹ Airbus A321neo" }
            ],
            hotels: [
                { name: "Cozy Danang Boutique Hotel", dates: "1/29 - 2/2 (4æ™š)", location: "å³´æ¸¯å¸‚å€", note: "2*é›™åºŠæˆ¿ + 1*é›™äººæˆ¿ã€‚\nå«æ—©é¤ã€æœ‰æµ´ç¼¸ã€é ‚æ¨“æ³³æ±  (2022é–‹å¹•)ã€‚", mapLink: "https://maps.app.goo.gl/CozyDanang", checkIn: "14:00", checkOut: "12:00" },
                { name: "Lantana Boutique Hoi An Hotel", dates: "2/2 - 2/4 (2æ™š)", location: "æœƒå®‰", note: "ä½æ–¼æ²³å²¸ï¼Œé™„æ—©é¤ï¼Œæœ‰æµ´ç¼¸ã€‚", mapLink: "https://www.agoda.com/sl/YSFc1TtZRCI", checkIn: "14:00", checkOut: "12:00" }
            ],
            days: [
                { day: 1, date: "1/29 (å››)", title: "æŠµé”å³´æ¸¯" },
                { day: 2, date: "1/30 (äº”)", title: "å·´æ‹¿å±±ä¸€æ—¥éŠ" },
                { day: 3, date: "1/31 (å…­)", title: "äº”è¡Œå±± & è³¼ç‰©" },
                { day: 4, date: "2/1 (æ—¥)", title: "é †åŒ–çš‡åŸå¤éƒ½" },
                { day: 5, date: "2/2 (ä¸€)", title: "è¿¦å—å³¶ & æœƒå®‰" },
                { day: 6, date: "2/3 (äºŒ)", title: "ç¾å±±è–åœ° & å¤åŸ" },
                { day: 7, date: "2/4 (ä¸‰)", title: "è¿”ç¨‹" }
            ],
            // ç‚ºé¿å…çµæ§‹è¤‡é›œï¼Œå°‡è¡Œç¨‹æ”¤å¹³ï¼Œé€é dayId é—œè¯
            activities: [
                // Day 1
                { dayId: 1, time: "17:25", title: "é£›æ©Ÿèˆªè¡Œ", desc: "å°ç£è™èˆª IT551 (æ¡ƒåœ’T1 -> å³´æ¸¯)", type: "flight" },
                { dayId: 1, time: "19:10", title: "å…¥å¢ƒé ˜è¡Œæ", desc: "å³´æ¸¯æ©Ÿå ´å…¥å¢ƒã€‚", type: "activity", map: "Da Nang Airport" },
                { dayId: 1, time: "19:40", title: "å‰å¾€å¸‚å€", desc: "å‰å¾€æ›åŒ¯èˆ‡é£¯åº—ã€‚", type: "transport", tag: "ğŸš— é ç´„æ¥é€ (16äººåº§)" },
                { dayId: 1, time: "20:00", title: "æ›åŒ¯", desc: "å»ºè­°ï¼šæ©Ÿå ´åŒ¯ç‡è‹¥å·®å¯å°‘é‡æ›ï¼Œæˆ–è¶•å»å¸‚å€éŠ€æ¨“ (éƒ¨åˆ†20:00é—œ)ã€‚", type: "activity", map: "Han Market Gold Shop" },
                { dayId: 1, time: "20:30", title: "Check-in", desc: "Cozy Danang Boutique Hotel", type: "hotel", map: "Cozy Danang Boutique Hotel" },
                { dayId: 1, time: "21:00", title: "æ™šé¤ï¼šåŠŸå¤«éºµ", desc: "Kungfu Noodle Restaurantã€‚\nç¶²å‹æ¨è–¦ï¼šç‰›è‚‰éºµã€å»£å—éºµã€‚", type: "food", map: "Kungfu Noodle Restaurant" },
                
                // Day 2
                { dayId: 2, time: "07:00", title: "æ—©é¤", desc: "é£¯åº—æ—©é¤ (06:30-10:00) æˆ–è·¯é‚Šç°¡é¤ã€‚", type: "food" },
                { dayId: 2, time: "07:30", title: "å‰å¾€å·´æ‹¿å±±", desc: "âš ï¸ é‡è¦ï¼šå·´æ‹¿å±±æ°£æº«ä½ 5-10 åº¦ä¸”å¤šè®Šï¼Œå‹™å¿…å¸¶å¤–å¥—å’Œé›¨å…·ã€‚", type: "transport", tag: "ğŸšŒ KKdayæ¥é€", important: true },
                { dayId: 2, time: "08:30", title: "çºœè»Šä¸Šå±± & æ™¯é»", desc: "æ­ä¹˜çºœè»Šã€‚\nåƒè§€ï¼šä½›æ‰‹æ©‹ã€æ„›æƒ…èŠ±åœ’ã€é»›è²é…’çª–ã€‚", type: "activity", map: "Golden Bridge Da Nang" },
                { dayId: 2, time: "12:30", title: "åˆé¤", desc: "å±±ä¸Šæœ‰ Buffet æˆ–å°åƒæ”¤ã€‚", type: "food" },
                { dayId: 2, time: "14:00", title: "æ³•åœ‹æ‘ & Fantasy Park", desc: "éŠè¦½æ³•åœ‹æ‘æ‹ç…§ã€‚\nFantasy Parkï¼šéå±±è»Š (ç´„ 124 TWD)ã€‚", type: "activity" },
                { dayId: 2, time: "16:30", title: "ä¸‹å±± & è¿”å›å¸‚å€", desc: "æ­çºœè»Šä¸‹å±±ï¼Œæ¥é€è¿”å›å³´æ¸¯å¸‚å€ã€‚", type: "transport", tag: "ğŸšŒ KKdayæ¥é€" },
                { dayId: 2, time: "19:00", title: "æ™šé¤ï¼šéŸ“æ±Ÿç•”/æµ·é®®", desc: "éŸ“æ±Ÿé‚Šé¤å»³ç”¨é¤(æ™¯è§€æˆ–æµ·é®®)ï¼Œé¤å¾Œæ­¥è¡Œè‡³é¾æ©‹ã€‚", type: "food" },
                { dayId: 2, time: "20:30", title: "é¾æ©‹å™´ç«ç§€", desc: "âš ï¸ å™´ç«æ™‚é–“ç´„ 15 åˆ†é˜ã€‚\nè¨˜å¾—ç«™åœ¨ã€Œé€†é¢¨è™•ã€é¿å…è¢«æ°´å™´æ¿•ã€‚", type: "activity", important: true, map: "Dragon Bridge Da Nang" },

                // Day 3
                { dayId: 3, time: "09:00", title: "å‰å¾€äº”è¡Œå±±", desc: "å‰å¾€æ°´å±±é›»æ¢¯å”®ç¥¨å£ã€‚", type: "transport", tag: "ğŸš• Grab ä¸ƒäººåº§" },
                { dayId: 3, time: "09:30", title: "äº”è¡Œå±±", desc: "å»ºè­°ï¼šé›»æ¢¯ä¸Šå±±ï¼Œèµ°ä¸‹å±± (ç´„10min)ã€‚\nåƒè§€éˆæ‡‰å¯ºã€ç„ç©ºæ´ã€‚", type: "activity", map: "Marble Mountains" },
                { dayId: 3, time: "12:00", title: "åˆé¤ï¼šThÃ¬a Gá»—", desc: "ç±³å…¶æ—æ¨è–¦é¤å»³ (ç‡Ÿæ¥­ 10:00-22:00)ã€‚", type: "food", map: "ThÃ¬a Gá»— Da Nang" },
                { dayId: 3, time: "14:00", title: "æ¼¢å¸‚å ´ & ç²‰ç´…æ•™å ‚", desc: "æ¼¢å¸‚å ´ (Han Market)ï¼š\n1F ä¼´æ‰‹ç¦®/ä¹¾è²¨ï¼Œ2F è¡£æœé‹å­ã€‚\nå‘¨é‚Šé‡‘é£¾åº—å¯æ›åŒ¯ã€‚", type: "shopping", map: "Han Market" },
                { dayId: 3, time: "17:00", title: "æ™šé¤ï¼šé¾è¦åƒåˆ°é£½", desc: "All Seasons Buffet Da Nangã€‚\nâš ï¸ å·²è¨‚ä½ï¼Œç¾å ´ä»˜è²» (KKdayè¨‚ä½)ã€‚", type: "food", important: true, map: "All Seasons Buffet Da Nang" },
                { dayId: 3, time: "20:00", title: "ç¾æºªæ²™ç˜", desc: "ä¸–ç•Œå…­å¤§æœ€ç¾æ²™ç˜æ•£æ­¥ã€å‘¨é‚Šç†±çŸ³æŒ‰æ‘©/Barã€‚", type: "activity", map: "My Khe Beach" },

                // Day 4
                { dayId: 4, time: "09:00", title: "å‰å¾€é †åŒ–", desc: "KLOOK åŒ…è»Š 12å°æ™‚ã€‚\né€”ç¶“ï¼šæµ·é›²é—œéš˜å£ã€é™µå§‘ç£ã€‚", type: "transport", tag: "ğŸš— KLOOK åŒ…è»Š", map: "Hai Van Pass" },
                { dayId: 4, time: "11:30", title: "åˆé¤ï¼šé †åŒ–æ–™ç†", desc: "æ¨è–¦ï¼šMadame Thu æˆ– Quan Hanhã€‚\nå¿…åƒï¼šé †åŒ–ç‰›è‚‰ç²‰ã€æµ®èé¤…ã€‚", type: "food" },
                { dayId: 4, time: "12:30", title: "é †åŒ–çš‡åŸ", desc: "è¶Šå—ç¸®å°ç‰ˆç´«ç¦åŸï¼Œåƒè§€ç´„ 2Hã€‚", type: "activity", map: "Hue Imperial City" },
                { dayId: 4, time: "15:00", title: "å•Ÿå®šçš‡é™µ", desc: "èåˆæ±è¥¿æ–¹å»ºç¯‰é¢¨æ ¼çš„çš‡é™µã€‚", type: "activity", map: "Tomb of Khai Dinh" },
                { dayId: 4, time: "18:00", title: "æ™šé¤ï¼šå±±èŒ¶å¤œå¸‚", desc: "çƒ¤é¾è¦ã€æµ·é®®ç›¤ã€è¶Šå¼ç…é¤…ã€‚\nâš ï¸ è‹¥æ“”å¿ƒæµ·é®®ä¸æ–°é®®ï¼Œå¯ç´”é€›è¡—ã€‚", type: "food", important: true, map: "Son Tra Night Market" },

                // Day 5
                { dayId: 5, time: "09:00", title: "å‰å¾€è¿¦å—å³¶", desc: "å¸¶è‘—è¡Œæç§»å‹•ã€‚", type: "transport", tag: "ğŸš— KLOOK åŒ…è»Š (4H)" },
                { dayId: 5, time: "10:00", title: "è¿¦å—å³¶ç«¹ç±ƒèˆ¹", desc: "é«”é©—å‚³çµ±æ¡¶èˆ¹æ—‹è½‰è¡¨æ¼”ã€‚\nâš ï¸ èˆ¹å¤«å°è²»ç´„ 20,000-50,000 VNDã€‚", type: "activity", important: true },
                { dayId: 5, time: "11:00", title: "åˆé¤ï¼šæµ·é®®ç«é‹", desc: "æµ·é®®ç«é‹ã€çƒ¤è¦ã€ç‚’ç©ºå¿ƒèœã€‚", type: "food" },
                { dayId: 5, time: "13:00", title: "Check-in", desc: "Lantana Boutique Hoi An Hotel", type: "hotel", map: "Lantana Boutique Hoi An Hotel" },
                { dayId: 5, time: "14:00", title: "æœƒå®‰å¤åŸæ¼«éŠ", desc: "æ—¥æœ¬æ©‹ã€ç¦å»ºæœƒé¤¨ã€‚\nä¸‹åˆèŒ¶ï¼šMot Hoi An (è·èŠ±èŒ¶)ã€Faifo Coffeeã€‚", type: "activity", map: "Hoi An Ancient Town" },
                { dayId: 5, time: "16:30", title: "æ¨‚åœ’è¿è³“ç§€", desc: "æœƒå®‰å°è±¡æ¨‚åœ’ 16:00 å…¥åœ’æ›ç¥¨ (KKday)ã€‚", type: "activity" },
                { dayId: 5, time: "20:00", title: "æœƒå®‰å›æ†¶ç§€", desc: "å¯¦æ™¯ç§€ (Main Show)ã€‚\nâš ï¸ æ•£å ´å»ºè­°å¿«é€Ÿèµ°åˆ°å¤§é¦¬è·¯å« Grabã€‚", type: "activity", important: true },

                // Day 6
                { dayId: 6, time: "09:00", title: "å‰å¾€ç¾å±±è–åœ°", desc: "è»Šç¨‹ç´„ 1 å°æ™‚ã€‚", type: "transport", tag: "ğŸš— KLOOK åŒ…è»Š (4H)" },
                { dayId: 6, time: "10:00", title: "ç¾å±±è–åœ°", desc: "åƒè§€å å©†ç‹åœ‹éºå€ã€‚", type: "activity", map: "My Son Sanctuary" },
                { dayId: 6, time: "13:00", title: "åˆé¤ & å¤åŸ", desc: "è¿”å›æœƒå®‰ï¼Œæ¢ç´¢å¤åŸã€è³¼ç‰©ã€‚", type: "shopping" },
                { dayId: 6, time: "17:00", title: "æ™šé¤ï¼šMorning Glory", desc: "æˆ– Miss Lyã€‚\nå¿…é»æœƒå®‰ä¸‰å¯¶ï¼šç™½ç«ç‘°ã€ç‚¸é›²åã€é«˜æ¨“éºµã€‚", type: "food" },
                { dayId: 6, time: "18:30", title: "æ”¾æ°´ç‡ˆ (ç§‹ç›†æ²³)", desc: "æ­ä¹˜èˆ¢èˆ¨èˆ¹æ”¾æ°´ç‡ˆã€‚", type: "activity" },
                { dayId: 6, time: "19:30", title: "æœƒå®‰å¤œå¸‚", desc: "ç‡ˆç± è¡—ã€è¡—é ­å°åƒã€‚", type: "shopping", map: "Hoi An Night Market" },

                // Day 7
                { dayId: 7, time: "07:00", title: "å‰å¾€å³´æ¸¯æ©Ÿå ´", desc: "å¾æœƒå®‰å‡ºç™¼ï¼Œé ç•™è»Šç¨‹æ™‚é–“ã€‚", type: "transport", tag: "ğŸšŒ KKday æ¥é€" },
                { dayId: 7, time: "10:20", title: "é£›æ©Ÿè¿”ç¨‹", desc: "è¯èˆª CI788 (å³´æ¸¯ T2 -> æ¡ƒåœ’ T1)ã€‚", type: "flight" }
            ]
        };

        // --- 2. é‚è¼¯å€ (Logic) ---
        let currentDayId = 1;

        // åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            try {
                renderDaySelector();
                renderItinerary(currentDayId);
                renderFlights();
                renderHotels();
                
                // ç§»é™¤ Loading
                document.getElementById('loading-msg').style.display = 'none';
            } catch (err) {
                document.getElementById('loading-msg').innerHTML = `<span class="text-red-500 font-bold">ç™¼ç”ŸéŒ¯èª¤: ${err.message}</span>`;
                console.error(err);
            }
        });

        // åˆ‡æ› Tab
        function switchTab(tabName) {
            // éš±è—æ‰€æœ‰å…§å®¹
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            // é¡¯ç¤ºç›®æ¨™å…§å®¹
            document.getElementById(`view-${tabName}`).classList.add('active');
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-teal-600');
                btn.classList.add('text-gray-400');
            });
            document.getElementById(`btn-${tabName}`).classList.remove('text-gray-400');
            document.getElementById(`btn-${tabName}`).classList.add('text-teal-600');
        }

        // é¸æ“‡æ—¥æœŸ
        function selectDay(dayId) {
            currentDayId = dayId;
            renderDaySelector(); // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            renderItinerary(dayId); // æ›´æ–°åˆ—è¡¨
            // è‡ªå‹•æ²åˆ°é ‚éƒ¨
            document.getElementById('app-container').scrollTo({ top: 0, behavior: 'smooth' });
        }

        // æ¸²æŸ“æ—¥æœŸé¸æ“‡å™¨
        function renderDaySelector() {
            const container = document.getElementById('day-selector');
            container.innerHTML = DATA.days.map(d => {
                const isActive = d.day === currentDayId;
                const activeClass = isActive ? 'bg-teal-600 text-white shadow-md transform scale-105' : 'bg-white text-gray-500 border border-gray-100';
                return `
                    <button onclick="selectDay(${d.day})" class="flex-none flex flex-col items-center justify-center min-w-[3.8rem] py-2 rounded-xl transition-all duration-200 ${activeClass}">
                        <span class="text-[10px] font-medium opacity-90">Day ${d.day}</span>
                        <span class="text-sm font-bold">${d.date.split('(')[0]}</span>
                    </button>
                `;
            }).join('');
        }

        // æ¸²æŸ“è¡Œç¨‹åˆ—è¡¨
        function renderItinerary(dayId) {
            const list = document.getElementById('itinerary-list');
            const dayData = DATA.days.find(d => d.day === dayId);
            const items = DATA.activities.filter(a => a.dayId === dayId);

            // æ¨™é¡Œ
            let html = `
                <div class="mb-2">
                    <h2 class="text-xl font-bold text-gray-800">${dayData.title}</h2>
                    <p class="text-sm text-gray-500">${dayData.date}</p>
                </div>
            `;

            if (items.length === 0) {
                html += `<div class="p-4 text-center text-gray-400">æœ¬æ—¥ç„¡ç‰¹å®šè¡Œç¨‹</div>`;
            } else {
                html += items.map((item, index) => {
                    const isLast = index === items.length - 1;
                    const typeColor = getTypeColor(item.type);
                    const typeIcon = getTypeIcon(item.type);
                    const transportBadge = item.tag ? `
                        <div class="bg-blue-50 px-3 py-1 border-b border-blue-100 flex items-center gap-1 text-xs font-bold text-blue-700">
                            ${item.tag}
                        </div>
                    ` : '';
                    
                    const importantStyle = item.important ? 'border-l-4 border-l-amber-400 bg-amber-50/30' : '';
                    const mapBtn = item.map ? `
                        <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.map)}" target="_blank" onclick="event.stopPropagation()" class="p-1.5 bg-gray-100 rounded-full text-gray-500 hover:text-teal-600 hover:bg-teal-50">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        </a>
                    ` : '';
                    
                    const copyBtn = item.type === 'hotel' ? `
                        <button onclick="event.stopPropagation(); copyText('${item.desc.split('\\n')[0]}')" class="mt-2 text-xs flex items-center gap-1 text-purple-600 bg-purple-50 px-2 py-1 rounded border border-purple-100">
                           <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> è¤‡è£½é£¯åº—å
                        </button>
                    ` : '';

                    return `
                    <div class="relative pl-4">
                        ${!isLast ? '<div class="absolute left-[27px] top-8 bottom-[-16px] w-0.5 bg-gray-200"></div>' : ''}
                        
                        <div class="relative bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-4 transition-transform active:scale-[0.99] ${importantStyle}">
                            ${transportBadge}
                            <div class="p-3 flex gap-3" onclick="toggleDesc(this)">
                                <!-- æ™‚é–“èˆ‡åœ–ç¤º -->
                                <div class="flex flex-col items-center gap-1 min-w-[3rem]">
                                    <span class="text-xs font-bold text-gray-500">${item.time}</span>
                                    <div class="w-8 h-8 rounded-full flex items-center justify-center text-white shadow-sm" style="background-color: ${typeColor}">
                                        ${typeIcon}
                                    </div>
                                </div>

                                <!-- å…§å®¹ -->
                                <div class="flex-1 min-w-0 pt-0.5">
                                    <div class="flex justify-between items-start">
                                        <h3 class="text-base font-bold text-gray-800 leading-tight">${item.title}</h3>
                                        <div class="flex gap-2 shrink-0 ml-1">
                                            ${item.important ? '<span class="text-amber-500 animate-pulse">âš ï¸</span>' : ''}
                                            ${mapBtn}
                                        </div>
                                    </div>
                                    <div class="mt-1 text-sm text-gray-600 desc-text">${item.desc}</div>
                                    ${copyBtn}
                                </div>
                            </div>
                        </div>
                    </div>
                    `;
                }).join('');
            }
            list.innerHTML = html;
        }

        // æ¸²æŸ“ç­æ©Ÿ
        function renderFlights() {
            const container = document.getElementById('view-flights');
            container.innerHTML = `
                <h2 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                    <span class="text-blue-600">âœˆï¸</span> èˆªç­è³‡è¨Š
                </h2>
            ` + DATA.flights.map(f => `
                <div class="bg-white rounded-xl p-5 shadow-sm border border-gray-100 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-blue-600 text-white text-xs px-3 py-1 rounded-bl-lg font-bold">
                        ${f.type}
                    </div>
                    <div class="text-xs text-gray-500 font-bold mb-2">${f.date}</div>
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-gray-800">${f.time.split('-')[0].trim()}</div>
                            <div class="text-xs text-gray-500">${f.from}</div>
                        </div>
                        <div class="flex-1 flex flex-col items-center px-2">
                             <div class="text-xs text-blue-600 font-bold mb-1">${f.airline}</div>
                             <div class="w-full h-[1px] bg-gray-300 relative">
                                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white px-1">âœˆï¸</div>
                             </div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-gray-800">${f.time.split('-')[1].trim()}</div>
                            <div class="text-xs text-gray-500">${f.to}</div>
                        </div>
                    </div>
                    <div class="bg-gray-50 p-2 rounded text-xs text-gray-600 border border-gray-100">
                        ${f.note}
                    </div>
                </div>
            `).join('');
        }

        // æ¸²æŸ“ä½å®¿
        function renderHotels() {
            const container = document.getElementById('view-hotels');
            container.innerHTML = `
                <h2 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                    <span class="text-purple-600">ğŸ¨</span> ä½å®¿è³‡è¨Š
                </h2>
            ` + DATA.hotels.map(h => `
                <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                    <div class="flex justify-between items-start mb-2">
                        <span class="bg-purple-100 text-purple-700 text-xs font-bold px-2 py-0.5 rounded">
                            ${h.location}
                        </span>
                        <span class="text-xs text-gray-400 font-medium">${h.dates}</span>
                    </div>
                    <h3 class="text-lg font-bold text-gray-800 mb-2 leading-tight">${h.name}</h3>
                    <div class="flex items-center gap-2 text-xs text-gray-500 mb-3">
                        <span>ğŸ•’ In ${h.checkIn} / Out ${h.checkOut}</span>
                    </div>
                    <div class="text-xs text-gray-600 bg-gray-50 p-3 rounded mb-3 whitespace-pre-wrap">${h.note}</div>
                    <div class="grid grid-cols-2 gap-3">
                        <a href="${h.mapLink}" target="_blank" class="flex items-center justify-center gap-1 bg-gray-100 text-gray-600 py-2 rounded-lg text-xs font-medium">
                            ğŸ“ åœ°åœ–
                        </a>
                        <button onclick="copyText('${h.name}')" class="flex items-center justify-center gap-1 bg-purple-50 text-purple-600 py-2 rounded-lg text-xs font-medium">
                            ğŸ“‹ è¤‡è£½
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // å·¥å…·å‡½å¼
        function toggleDesc(el) {
            const desc = el.querySelector('.desc-text');
            if(desc) desc.classList.toggle('expanded');
        }

        function copyText(text) {
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(() => alert('å·²è¤‡è£½: ' + text));
            } else {
                // Fallback for older browsers
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('å·²è¤‡è£½: ' + text);
            }
        }

        function getTypeColor(type) {
            switch(type) {
                case 'transport': return '#3b82f6'; // Blue
                case 'flight': return '#3b82f6';
                case 'hotel': return '#a855f7'; // Purple
                case 'food': return '#f97316'; // Orange
                case 'shopping': return '#ec4899'; // Pink
                default: return '#10b981'; // Emerald
            }
        }

        function getTypeIcon(type) {
            // Simple SVG strings
            const icons = {
                transport: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>',
                flight: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>',
                hotel: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m8-2a2 2 0 100-4 2 2 0 000 4zm-6-4a2 2 0 110-4 2 2 0 010 4zm6-10a2 2 0 110-4 2 2 0 010 4zm-6 4a2 2 0 110-4 2 2 0 010 4z"></path></svg>',
                food: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>', // Using cart/utensils generic
                shopping: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>',
                activity: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'
            };
            return icons[type] || icons.activity;
        }
    </script>
</body>
</html>
