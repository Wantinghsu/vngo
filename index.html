<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‚úàÔ∏è2026Ë∂äÂçó7Â§©6Â§ú‚úàÔ∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f3f4f6;
            color: #333;
            overscroll-behavior-y: none;
        }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .pt-safe-top { padding-top: max(env(safe-area-inset-top), 1rem); }
        .tab-content { display: none; opacity: 0; transition: opacity 0.2s ease-in-out; }
        .tab-content.active { display: block; opacity: 1; }
        
        /* ÊñáÂ≠óÂ±ïÈñãÊî∂ÂêàÊ®£Âºè */
        .desc-text {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            white-space: pre-wrap;
            transition: all 0.3s ease;
        }
        .desc-text.expanded {
            -webkit-line-clamp: unset;
        }
        
        /* ÊôÇÈñìËª∏Á∑öÊ¢ù */
        .timeline-line {
            position: absolute;
            left: 27px;
            top: 3.5rem;
            bottom: -1rem;
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }
    </style>
</head>
<body class="h-[100dvh] flex flex-col overflow-hidden max-w-md mx-auto bg-gray-50 shadow-2xl relative">

    <!-- Header -->
    <header class="bg-teal-700 text-white px-5 pt-safe-top pb-4 shadow-md z-20 shrink-0">
        <div class="flex justify-between items-center pt-2">
            <div>
                <h1 class="text-xl font-bold tracking-tight">2026 Â≥¥Ê∏Ø 7Â§©6Â§ú</h1>
                <p class="text-teal-100 text-sm opacity-90 mt-1">1/29 (Âõõ) - 2/4 (‰∏â)</p>
            </div>
            <a href="https://drive.google.com/drive/folders/1Bq2wuzbQWBVWhPaaxSokI7O7cNZOchXd" target="_blank" class="bg-white/10 hover:bg-white/20 p-2 rounded-full transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
            </a>
        </div>
    </header>

    <!-- Main -->
    <main id="app-container" class="flex-1 overflow-y-auto relative bg-gray-50 pb-24">
        <div id="loading-msg" class="p-10 text-center text-gray-500">
            Ë≥áÊñôËºâÂÖ•‰∏≠...
        </div>
        
        <!-- Ë°åÁ®ã Tab -->
        <div id="view-itinerary" class="tab-content active">
            <div class="sticky top-0 z-10 bg-white/95 backdrop-blur-sm border-b border-gray-200 py-3 shadow-sm">
                <div id="day-selector" class="flex px-4 gap-3 overflow-x-auto hide-scrollbar"></div>
            </div>
            <div id="itinerary-list" class="p-4 space-y-4"></div>
        </div>

        <!-- Áè≠Ê©ü Tab -->
        <div id="view-flights" class="tab-content p-5 space-y-4"></div>

        <!-- ‰ΩèÂÆø Tab -->
        <div id="view-hotels" class="tab-content p-5 space-y-4"></div>
    </main>

    <!-- Footer Nav -->
    <nav class="bg-white border-t border-gray-200 shrink-0 pb-safe z-30 fixed bottom-0 w-full max-w-md">
        <div class="flex justify-around items-center h-16">
            <button onclick="switchTab('itinerary')" id="btn-itinerary" class="nav-btn flex flex-col items-center justify-center w-full h-full text-teal-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                <span class="text-xs font-medium mt-1">Ë°åÁ®ã</span>
            </button>
            <button onclick="switchTab('flights')" id="btn-flights" class="nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                <span class="text-xs font-medium mt-1">Áè≠Ê©ü</span>
            </button>
            <button onclick="switchTab('hotels')" id="btn-hotels" class="nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m8-2a2 2 0 100-4 2 2 0 000 4zm-6-4a2 2 0 110-4 2 2 0 010 4zm6-10a2 2 0 110-4 2 2 0 010 4zm-6 4a2 2 0 110-4 2 2 0 010 4z"></path></svg>
                <span class="text-xs font-medium mt-1">‰ΩèÂÆø</span>
            </button>
        </div>
    </nav>

    <script>
        const DATA = {
            flights: [
                { type: "ÂéªÁ®ã", date: "1/29 (Âõõ)", airline: "Âè∞ÁÅ£ËôéËà™ IT 551", time: "17:25 - 19:10", from: "Ê°ÉÂúíÊ©üÂ†¥ (T1)", to: "Â≥¥Ê∏ØÊ©üÂ†¥", note: "Êúâ‰æõÈ§ê„ÄÇ\nËµ∑È£õÂâç 48h-60m ÈúÄÁ∂≤Ë∑ØÂ†±Âà∞" },
                { type: "ÂõûÁ®ã", date: "2/4 (‰∏â)", airline: "ËèØËà™ CI 788", time: "10:20 - 14:05", from: "Â≥¥Ê∏ØÊ©üÂ†¥ (T2)", to: "Ê°ÉÂúíÊ©üÂ†¥ (T1)", note: "Ê©üÂûã Airbus A321neo" }
            ],
            hotels: [
                { name: "Cozy Danang Boutique Hotel", dates: "1/29 - 2/2 (4Êôö)", location: "Â≥¥Ê∏ØÂ∏ÇÂçÄ", note: "2*ÈõôÂ∫äÊàø + 1*Èõô‰∫∫Êàø„ÄÇ\nÂê´Êó©È§ê„ÄÅÊúâÊµ¥Áº∏„ÄÅÈ†ÇÊ®ìÊ≥≥Ê±† (2022ÈñãÂπï)„ÄÇ", mapLink: "https://maps.app.goo.gl/CozyDanang", checkIn: "14:00", checkOut: "12:00" },
                { name: "Lantana Boutique Hoi An Hotel", dates: "2/2 - 2/4 (2Êôö)", location: "ÊúÉÂÆâ", note: "‰ΩçÊñºÊ≤≥Â≤∏ÔºåÈôÑÊó©È§êÔºåÊúâÊµ¥Áº∏„ÄÇ", mapLink: "https://www.agoda.com/sl/YSFc1TtZRCI", checkIn: "14:00", checkOut: "12:00" }
            ],
            days: [
                { day: 1, date: "1/29 (Âõõ)", title: "ÊäµÈÅîÂ≥¥Ê∏Ø" },
                { day: 2, date: "1/30 (‰∫î)", title: "Â∑¥ÊãøÂ±±‰∏ÄÊó•ÈÅä" },
                { day: 3, date: "1/31 (ÂÖ≠)", title: "‰∫îË°åÂ±± & Ë≥ºÁâ©" },
                { day: 4, date: "2/1 (Êó•)", title: "È†ÜÂåñÁöáÂüéÂè§ÈÉΩ" },
                { day: 5, date: "2/2 (‰∏Ä)", title: "Ëø¶ÂçóÂ≥∂ & ÊúÉÂÆâ" },
                { day: 6, date: "2/3 (‰∫å)", title: "ÁæéÂ±±ËÅñÂú∞ & Âè§Âüé" },
                { day: 7, date: "2/4 (‰∏â)", title: "ËøîÁ®ã" }
            ],
            // charter: Ê®ôË®òË©≤È†ÖÁõÆÊòØÂê¶Âú®ÂåÖËªäÁØÑÂúçÂÖß
            activities: [
                // Day 1
                { dayId: 1, time: "17:25", title: "‚úàÔ∏è È£õÊ©üËà™Ë°å", desc: "Âè∞ÁÅ£ËôéËà™ IT551 (Ê°ÉÂúíT1 -> Â≥¥Ê∏Ø)\nÊ©ü‰∏äÊúâ‰æõÈ§ê„ÄÇ", type: "flight" },
                { dayId: 1, time: "19:10", title: "üõ¨ ÂÖ•Â¢ÉÈ†òË°åÊùé", desc: "Â≥¥Ê∏ØÊ©üÂ†¥ÂÖ•Â¢ÉÂ§ßÂª≥„ÄÇ", type: "activity", map: "Da Nang Airport" },
                { dayId: 1, time: "19:40", title: "üöó ÂâçÂæÄÂ∏ÇÂçÄ", desc: "È†êÁ¥ÑÊé•ÈÄÅ (16‰∫∫Â∫ßËªä) ÂâçÂæÄÂ∏ÇÂçÄ„ÄÇ", type: "transport", tag: "Êé•ÈÄÅ" },
                { dayId: 1, time: "20:00", title: "üí∞ Ê©üÂ†¥ÊèõÂåØ", desc: "ÂÖàÂú®Ê©üÂ†¥ÊèõÂ∞ëÈáèË∂äÂçóÁõæ„ÄÇ\n‚ö†Ô∏è Ê≥®ÊÑèÔºöÊ©üÂ†¥ÂåØÁéáÂèØËÉΩËºÉÂ∑ÆÔºå‰∏îÊ´ÉÊ™ØÂ§öÂú® 20:00 Â∑¶Âè≥ÈóúÈñâÔºåËã•‰æÜ‰∏çÂèäË´ãÊîπËá≥Â∏ÇÂçÄ„ÄÇ", type: "activity", important: true },
                { dayId: 1, time: "20:30", title: "üè® Check-in", desc: "Cozy Danang Boutique Hotel\nÊîæÁΩÆË°åÊùé„ÄÇ", type: "hotel", map: "Cozy Danang Boutique Hotel" },
                { dayId: 1, time: "21:00", title: "üçú ÊôöÈ§êÔºöÂäüÂ§´È∫µ", desc: "Kungfu Noodle Restaurant (ÁáüÊ•≠Ëá≥ 21:30)„ÄÇ\nÁ∂≤ÂèãÊé®Ëñ¶ÔºöÁâõËÇâÈ∫µ„ÄÅÂª£ÂçóÈ∫µ (Âπ≥ÂÉπÂ•ΩÂêÉ)„ÄÇ", type: "food", map: "Kungfu Noodle Restaurant" },
                { dayId: 1, time: "22:00", title: "üõå ÂõûÈ£ØÂ∫ó‰ºëÊÅØ", desc: "Cozy Danang Boutique Hotel„ÄÇ", type: "hotel" },
                
                // Day 2
                { dayId: 2, time: "07:00", title: "ü•£ Êó©È§êÔºöÈ£ØÂ∫ó", desc: "È£ØÂ∫óÊó©È§ê (‰æõÊáâÊôÇÈñì 06:30-10:00)„ÄÇ", type: "food" },
                { dayId: 2, time: "07:30", title: "üöå ÂâçÂæÄÂ∑¥ÊãøÂ±±", desc: "KKday Êé•ÈÄÅ (Ë´ãÂú®È£ØÂ∫óÂ§ßÂª≥Á≠âÂÄô)„ÄÇ\n‚ö†Ô∏è ÈáçË¶ÅÔºöÂ±±‰∏äÊ∞£Ê∫´‰Ωé 5-10 Â∫¶ÔºåÂãôÂøÖÂ∏∂Â§ñÂ•óÂíåÈõ®ÂÖ∑„ÄÇ", type: "transport", tag: "KKday", important: true },
                { dayId: 2, time: "08:30", title: "üö† Á∫úËªä & ÈªÉÈáë‰ΩõÊâãÊ©ã", desc: "Êê≠‰πòÁ∫úËªä‰∏äÂ±±„ÄÇ\nÂèÉËßÄÔºö‰ΩõÊâãÊ©ã„ÄÅÊÑõÊÉÖËä±Âúí„ÄÅÈªõË≤ùÈÖíÁ™ñ„ÄÇ", type: "activity", map: "Golden Bridge Da Nang" },
                { dayId: 2, time: "12:30", title: "üçî ÂçàÈ§êÔºöÂ±±‰∏äÂ∞èÂêÉ", desc: "Âª∫Ë≠∞Âú®Â±±‰∏äÊî§Ë≤©Êàñ Buffet Ëß£Ê±∫„ÄÇ\n(ÈÄ£ÁµêÁÇ∫Âú∞Âúñ‰ΩçÁΩÆ)", type: "food", map: "Ba Na Hills Sun World" },
                { dayId: 2, time: "14:00", title: "üè∞ Ê≥ïÂúãÊùë & Ê®ÇÂúí", desc: "ÈÅäË¶ΩÊ≥ïÂúãÊùëÊãçÁÖß„ÄÇ\nFantasy ParkÔºöÂÆ§ÂÖßÈÅäÊ®ÇÂúíÔºåÈÅéÂ±±Ëªä (Á¥Ñ 124 TWD)„ÄÇ", type: "activity" },
                { dayId: 2, time: "16:30", title: "üöå ‰∏ãÂ±± & ËøîÂõûÂ∏ÇÂçÄ", desc: "Êê≠Á∫úËªä‰∏ãÂ±±ÔºåÊê≠‰πòÊé•ÈÄÅËªäËøîÂõûÂ≥¥Ê∏ØÂ∏ÇÂçÄ„ÄÇ", type: "transport", tag: "KKday" },
                { dayId: 2, time: "18:30", title: "üí∞ Ë£úÊèõÂåØ", desc: "ÂâçÂæÄÊº¢Â∏ÇÂ†¥Âë®ÈÇäÈäÄÊ®ìË£úÊèõË∂äÂçóÁõæ„ÄÇ", type: "activity", map: "Han Market Gold Shop" },
                { dayId: 2, time: "19:00", title: "ü¶û ÊôöÈ§êÔºöÈüìÊ±üÁïî/Êµ∑ÈÆÆ", desc: "Âª∫Ë≠∞ÔºöÈüìÊ±üÈÇäÈ§êÂª≥Áî®È§ê (ÊôØËßÄÊàñÊµ∑ÈÆÆ)„ÄÇ\nÈ§êÂæåÂèØÊ≠•Ë°åËá≥ÈæçÊ©ã„ÄÇ", type: "food" },
                { dayId: 2, time: "20:30", title: "üêâ ÈæçÊ©ãÂô¥ÁÅ´ÁßÄ", desc: "‚ö†Ô∏è Âô¥ÁÅ´ÊôÇÈñìÁ¥Ñ 15 ÂàÜÈêò„ÄÇ\nË®òÂæóÁ´ôÂú®„ÄåÈÄÜÈ¢®Ëôï„ÄçÈÅøÂÖçË¢´Ê∞¥Âô¥Êøï„ÄÇ", type: "activity", important: true, map: "Dragon Bridge Da Nang" },
                { dayId: 2, time: "21:30", title: "üõå ÂõûÈ£ØÂ∫ó‰ºëÊÅØ", desc: "Cozy Danang Boutique Hotel„ÄÇ", type: "hotel" },

                // Day 3
                { dayId: 3, time: "08:00", title: "ü•£ Êó©È§êÔºöÈ£ØÂ∫ó", desc: "È£ØÂ∫óÊó©È§ê„ÄÇ", type: "food" },
                { dayId: 3, time: "09:00", title: "üöó ÂâçÂæÄ‰∫îË°åÂ±±", desc: "Âè´ËªäÂâçÂæÄÊ∞¥Â±±ÈõªÊ¢ØÂîÆÁ•®Âè£„ÄÇ", type: "transport", tag: "Grab ‰∏É‰∫∫Â∫ß" },
                { dayId: 3, time: "09:30", title: "‚õ∞Ô∏è ‰∫îË°åÂ±±", desc: "Âª∫Ë≠∞ÔºöÈõªÊ¢Ø‰∏äÂ±±ÔºåËµ∞‰∏ãÂ±± (Á¥Ñ10min)„ÄÇ\nÂèÉËßÄÈùàÊáâÂØ∫„ÄÅÁéÑÁ©∫Ê¥û„ÄÇ", type: "activity", map: "Marble Mountains" },
                { dayId: 3, time: "12:00", title: "ü•¢ ÂçàÈ§êÔºöTh√¨a G·ªó", desc: "Á±≥ÂÖ∂ÊûóÊé®Ëñ¶Ë∂äÂçóÊñôÁêÜ (ÁáüÊ•≠ 10:00-22:00)„ÄÇ", type: "food", map: "Th√¨a G·ªó Da Nang" },
                { dayId: 3, time: "14:00", title: "üõçÔ∏è Êº¢Â∏ÇÂ†¥ & Á≤âÁ¥ÖÊïôÂ†Ç", desc: "Êº¢Â∏ÇÂ†¥ (Han Market)Ôºö\n1F ‰º¥ÊâãÁ¶Æ/‰πæË≤®Ôºå2F Ë°£ÊúçÈûãÂ≠ê„ÄÇ\nÂë®ÈÇäÈáëÈ£æÂ∫óÂèØË£úÊèõÂåØ„ÄÇ", type: "shopping", map: "Han Market" },
                { dayId: 3, time: "17:00", title: "ü¶û ÊôöÈ§êÔºöAll Seasons", desc: "All Seasons Buffet Da Nang„ÄÇ\n‚ö†Ô∏è Â∑≤È†êË®ÇÈæçËù¶ÂêÉÂà∞È£ΩÔºåÁèæÂ†¥‰ªòË≤ª (KKdayË®Ç‰Ωç)„ÄÇ", type: "food", important: true, map: "All Seasons Buffet Da Nang" },
                { dayId: 3, time: "20:00", title: "üíÜ‚Äç‚ôÄÔ∏è ÊåâÊë© SPA", desc: "H∆∞∆°ng Tr√†m Spa (ÂèØÈ†êÁ¥Ñ)„ÄÇ\nÊàñÂú®ÁæéÊ∫™Ê≤ôÁÅòÂë®ÈÇäÊï£Ê≠•„ÄÇ", type: "activity", map: "H∆∞∆°ng Tr√†m Spa Da Nang" },
                { dayId: 3, time: "22:00", title: "üõå ÂõûÈ£ØÂ∫ó‰ºëÊÅØ", desc: "Cozy Danang Boutique Hotel„ÄÇ", type: "hotel" },

                // Day 4
                { dayId: 4, time: "07:30", title: "ü•£ Êó©È§êÔºöÈ£ØÂ∫ó", desc: "È£ØÂ∫óÊó©È§êÔºåÂêÉÈ£ΩÊ∫ñÂÇôÈï∑ÈÄîËªäÁ®ã„ÄÇ", type: "food" },
                { dayId: 4, time: "09:00", title: "üöó ÂâçÂæÄÈ†ÜÂåñ (ÂåÖËªä)", desc: "KLOOK ÂåÖËªä 12Â∞èÊôÇ„ÄÇ\nÈÄîÁ∂ìÔºöÊµ∑Èõ≤ÈóúÈöòÂè£„ÄÅÈôµÂßëÁÅ£ (‰∫∫ÁîüÂøÖÂéª50ÊôØÈªû)„ÄÇ", type: "transport", tag: "ÂåÖËªä12H", charter: true, map: "Hai Van Pass" },
                { dayId: 4, time: "11:30", title: "üçú ÂçàÈ§êÔºöÈ†ÜÂåñÊñôÁêÜ", desc: "Êé®Ëñ¶ÔºöMadame Thu Êàñ Quan Hanh„ÄÇ\nÂøÖÂêÉÔºöÈ†ÜÂåñÁâõËÇâÁ≤â (Bun Bo Hue)„ÄÅÊµÆËêçÈ§Ö„ÄÇ", type: "food", charter: true, map: "Madame Thu Restaurant - Hue" },
                { dayId: 4, time: "12:30", title: "üèØ È†ÜÂåñÁöáÂüé", desc: "Ë∂äÂçóÁ∏ÆÂ∞èÁâàÁ¥´Á¶ÅÂüéÔºåÂèÉËßÄÁ¥Ñ 2H„ÄÇ", type: "activity", charter: true, map: "Hue Imperial City" },
                { dayId: 4, time: "15:00", title: "üèõÔ∏è ÂïüÂÆöÁöáÈôµ / Â§©Âß•ÂØ∫", desc: "‰∏ªË°åÁ®ãÔºöÂïüÂÆöÁöáÈôµ (ËûçÂêàÊù±Ë•øÊñπÂª∫ÁØâ)„ÄÇ\nÂÇôÊ°àÔºöÂ§©Âß•ÂØ∫ (Thien Mu Pagoda) Ëã•ÊôÇÈñìÂÖÖË£ïÂèØÂéª„ÄÇ", type: "activity", charter: true, map: "Tomb of Khai Dinh" },
                { dayId: 4, time: "16:30", title: "üöó ËøîÂõûÂ≥¥Ê∏Ø", desc: "ËªäÁ®ãÁ¥Ñ 2.5 Â∞èÊôÇÔºåÁ∂ìÊµ∑Èõ≤ÈößÈÅìËøîÂõû„ÄÇ", type: "transport", charter: true },
                { dayId: 4, time: "19:00", title: "üç¢ ÊôöÈ§êÔºöÂ±±Ëå∂Â§úÂ∏Ç", desc: "ÁÉ§ÈæçËù¶„ÄÅÊµ∑ÈÆÆÁõ§„ÄÅË∂äÂºèÁÖéÈ§Ö„ÄÇ\n‚ö†Ô∏è ÂÇôË®ªÔºöËã•ÊìîÂøÉÊµ∑ÈÆÆ‰∏çÊñ∞ÈÆÆÔºåÂèØÁ¥îÈÄõË°óÔºåÂêÉÂà•ÁöÑ„ÄÇ", type: "food", map: "Son Tra Night Market" },
                { dayId: 4, time: "21:00", title: "üêâ ÈæçÊ©ãÂô¥ÁÅ´ (ÂÇôÊ°à)", desc: "ÊØèÈÄ±‰∫î„ÄÅÂÖ≠„ÄÅÊó• 21:00 Âô¥ÁÅ´„ÄÇ\nËã• Day 2 Ê≤íÁúãÂà∞Ôºå‰ªäÊôöÂèØË£úÁúã„ÄÇ", type: "activity", important: true },
                { dayId: 4, time: "22:00", title: "üõå ÂõûÈ£ØÂ∫ó‰ºëÊÅØ", desc: "Cozy Danang Boutique Hotel (ÊúÄÂæå‰∏ÄÊôö)„ÄÇ", type: "hotel" },

                // Day 5
                { dayId: 5, time: "07:30", title: "ü•£ Êó©È§êÔºöÈ£ØÂ∫ó", desc: "È£ØÂ∫óÊó©È§ê„ÄÇ\nÁî®È§êÂæåÊï¥ÁêÜË°åÊùéÈÄÄÊàø„ÄÇ", type: "food" },
                { dayId: 5, time: "09:00", title: "üöó ÂâçÂæÄËø¶ÂçóÂ≥∂", desc: "Â∏∂ËëóË°åÊùéÁßªÂãïÔºåÂåÖËªäÂâçÂæÄ„ÄÇ", type: "transport", tag: "ÂåÖËªä4H", charter: true },
                { dayId: 5, time: "10:00", title: "ü•• Ëø¶ÂçóÂ≥∂Á´πÁ±ÉËàπ", desc: "È´îÈ©óÂÇ≥Áµ±Ê°∂ËàπÊóãËΩâË°®Êºî (Á¥Ñ1Â∞èÊôÇ)„ÄÇ\n‚ö†Ô∏è ËàπÂ§´Â∞èË≤ªÁ¥Ñ 20,000-50,000 VND„ÄÇ", type: "activity", important: true, charter: true },
                { dayId: 5, time: "11:30", title: "üç≤ ÂçàÈ§êÔºöNh√† h√†ng B√¥ng D·ª´a", desc: "B√¥ng D·ª´a Restaurant„ÄÇ\nÁâπËâ≤ÔºöÊµ∑ÈÆÆÁÅ´Èçã„ÄÅÁÉ§Ëù¶„ÄÅÁÇíÁ©∫ÂøÉËèú„ÄÇ", type: "food", charter: true, map: "Nh√† h√†ng B√¥ng D·ª´a Hoi An" },
                { dayId: 5, time: "13:00", title: "üè® ÂâçÂæÄÊúÉÂÆâ & Check-in", desc: "ÂåÖËªäÁµêÊùüÔºåÂâçÂæÄ Lantana Boutique Hoi An Hotel ÊîæË°åÊùé„ÄÇ", type: "hotel", charter: true, map: "Lantana Boutique Hoi An Hotel" },
                { dayId: 5, time: "14:00", title: "üèÆ ÊúÉÂÆâÂè§ÂüéÊº´ÈÅä", desc: "ÊôØÈªûÔºöÊó•Êú¨Ê©ã„ÄÅÁ¶èÂª∫ÊúÉÈ§®„ÄÇ\n‰∏ãÂçàËå∂ÔºöMot Hoi An (Ëç∑Ëä±Ëå∂)„ÄÅFaifo Coffee (È†ÇÊ®ìÊôØ)„ÄÇ", type: "activity", map: "Hoi An Ancient Town" },
                { dayId: 5, time: "16:00", title: "üé° Ê®ÇÂúíËøéË≥ìÁßÄ", desc: "ÊúÉÂÆâÂç∞Ë±°Ê®ÇÂúí 16:00 ÂÖ•ÂúíÊèõÁ•® (KKday)„ÄÇ\nËßÄË≥ûËøéË≥ìÁßÄ (Mini Shows)„ÄÇ", type: "activity" },
                { dayId: 5, time: "17:30", title: "üçΩÔ∏è ÊôöÈ§êÔºöN√≥n L√° (ÊñóÁ¨†)", desc: "ÂúíÂçÄÂÖßËá™Âä©È§ê„ÄÇ", type: "food" },
                { dayId: 5, time: "20:00", title: "üé≠ ÊúÉÂÆâÂõûÊÜ∂ÁßÄ", desc: "„ÄäÊúÉÂÆâÂõûÊÜ∂„ÄãÂØ¶ÊôØÁßÄ (Main Show) 20:00-21:00„ÄÇ\n\nË©≥Á¥∞ÊµÅÁ®ãÔºö\n16:30-17:30 ËøéË≥ìÁßÄ\n17:30-18:45 ÊôöÈ§ê\n18:45-19:30 Â§úÊôØ&ÁâπËâ≤Â∞èÁßÄ(ÁéâËèØÂÖ¨‰∏ªÂ§ßÂ©ö)\n19:30-19:50 Ë©¢ÂïèÂ∑•‰Ωú‰∫∫Âì° 'VIP Elevator' ÈÄ≤Â†¥\n\n‚ö†Ô∏è Êï£Â†¥Âª∫Ë≠∞ÔºöËµ∞Âá∫ÂäáÂ†¥ÂæåÈÅéÊ©ãÔºåËµ∞Âà∞Â§ßÈ¶¨Ë∑ØÂè´ Grab„ÄÇ", type: "activity", important: true },
                { dayId: 5, time: "21:30", title: "üõå ÂõûÈ£ØÂ∫ó‰ºëÊÅØ", desc: "Lantana Boutique Hoi An Hotel„ÄÇ", type: "hotel" },

                // Day 6
                { dayId: 6, time: "07:30", title: "ü•£ Êó©È§êÔºöÈ£ØÂ∫ó", desc: "È£ØÂ∫óÊó©È§ê„ÄÇ", type: "food" },
                { dayId: 6, time: "09:00", title: "üöó ÂâçÂæÄÁæéÂ±±ËÅñÂú∞", desc: "ËªäÁ®ãÁ¥Ñ 1 Â∞èÊôÇ„ÄÇ", type: "transport", tag: "ÂåÖËªä4H", charter: true },
                { dayId: 6, time: "10:00", title: "üõï ÁæéÂ±±ËÅñÂú∞", desc: "ÂèÉËßÄÂç†Â©ÜÁéãÂúãÈÅ∫ÂùÄ (Â∞èÂê≥Âì•Á™ü)„ÄÇ\nÊúâÊé•ÈßÅËªäËàáËàûËπàË°®Êºî„ÄÇ", type: "activity", map: "My Son Sanctuary", charter: true },
                { dayId: 6, time: "12:00", title: "üöó ËøîÂõûÊúÉÂÆâ", desc: "Êê≠ËªäËøîÂõûÊúÉÂÆâÂ∏ÇÂçÄ (Á¥Ñ1Â∞èÊôÇ)„ÄÇ", type: "transport", charter: true },
                { dayId: 6, time: "13:30", title: "ü•ñ ÂçàÈ§êÔºöÂè§ÂüéÂ∞èÂêÉ", desc: "Êé®Ëñ¶ÔºöMadam Khan (Ë∂äÂºèÊ≥ïÂúãÈ∫µÂåÖ) Êàñ Banh Mi Phuong„ÄÇ", type: "food", map: "Madam Khan - The Banh Mi Queen" },
                { dayId: 6, time: "15:00", title: "üõçÔ∏è Âè§ÂüéË≥ºÁâ© & ‰∏ãÂçàËå∂", desc: "Ë£ÅÁ∏´Â∫óË®ÇË£Ω„ÄÅÁöÆ‰ª∂„ÄÅÁáàÁ±†„ÄÇ\nÊâæÈñìÂíñÂï°Âª≥‰ºëÊÅØ„ÄÇ", type: "shopping" },
                { dayId: 6, time: "17:30", title: "ü•¢ ÊôöÈ§êÔºöMorning Glory", desc: "Êàñ Miss Ly„ÄÇ\nÂøÖÈªûÊúÉÂÆâ‰∏âÂØ∂ÔºöÁôΩÁé´Áë∞„ÄÅÁÇ∏Èõ≤Âêû„ÄÅÈ´òÊ®ìÈ∫µ„ÄÇ", type: "food", map: "Morning Glory Original" },
                { dayId: 6, time: "18:30", title: "üïØÔ∏è ÊîæÊ∞¥Ááà (ÁßãÁõÜÊ≤≥)", desc: "Êê≠‰πòËà¢Ëà®ËàπÊîæÊ∞¥ÁáàÔºåÊ¨£Ë≥ûÂ§úÊôØ„ÄÇ", type: "activity" },
                { dayId: 6, time: "19:30", title: "üèÆ ÊúÉÂÆâÂ§úÂ∏Ç", desc: "ÁáàÁ±†Ë°óÊãçÁÖß„ÄÅË≤∑Á´πÁ∑®ÂåÖ„ÄÇ", type: "shopping", map: "Hoi An Night Market" },
                { dayId: 6, time: "21:00", title: "üõå ÂõûÈ£ØÂ∫ó‰ºëÊÅØ", desc: "Lantana Boutique Hoi An Hotel„ÄÇ", type: "hotel" },

                // Day 7
                { dayId: 7, time: "06:30", title: "ü•£ Êó©È§êÔºöÈ£ØÂ∫ó", desc: "È£ØÂ∫óÁ∞°ÊòìÊó©È§ê / Ëæ¶ÁêÜÈÄÄÊàø„ÄÇ", type: "food" },
                { dayId: 7, time: "07:00", title: "üöå ÂâçÂæÄÂ≥¥Ê∏ØÊ©üÂ†¥", desc: "ÂæûÊúÉÂÆâÂá∫ÁôºÔºåÈ†êÁïôËªäÁ®ãÊôÇÈñì„ÄÇ\n(KKday Êé•ÈÄÅ)", type: "transport", tag: "KKday" },
                { dayId: 7, time: "08:00", title: "üõ´ Ê©üÂ†¥Â†±Âà∞", desc: "Ëæ¶ÁêÜÁôªÊ©ü„ÄÅÊúÄÂæåÂÖçÁ®ÖÂ∫óÊé°Ë≤∑„ÄÇ", type: "activity" },
                { dayId: 7, time: "10:20", title: "‚úàÔ∏è È£õÊ©üËøîÁ®ã", desc: "ËèØËà™ CI788 (Â≥¥Ê∏Ø T2 -> Ê°ÉÂúí T1)„ÄÇ\n14:05 ÊäµÈÅîÂè∞ÁÅ£„ÄÇ", type: "flight" }
            ]
        };

        // --- Logic ---
        let currentDayId = 1;

        window.addEventListener('DOMContentLoaded', () => {
            try {
                renderDaySelector();
                renderItinerary(currentDayId);
                renderFlights();
                renderHotels();
                document.getElementById('loading-msg').style.display = 'none';
            } catch (err) {
                document.getElementById('loading-msg').innerHTML = `<span class="text-red-500">Error: ${err.message}</span>`;
            }
        });

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(`view-${tabName}`).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-teal-600');
                btn.classList.add('text-gray-400');
            });
            document.getElementById(`btn-${tabName}`).classList.remove('text-gray-400');
            document.getElementById(`btn-${tabName}`).classList.add('text-teal-600');
        }

        function selectDay(dayId) {
            currentDayId = dayId;
            renderDaySelector();
            renderItinerary(dayId);
            document.getElementById('app-container').scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderDaySelector() {
            const container = document.getElementById('day-selector');
            container.innerHTML = DATA.days.map(d => {
                const isActive = d.day === currentDayId;
                const activeClass = isActive ? 'bg-teal-600 text-white shadow-md transform scale-105' : 'bg-white text-gray-500 border border-gray-100';
                return `<button onclick="selectDay(${d.day})" class="flex-none flex flex-col items-center justify-center min-w-[3.8rem] py-2 rounded-xl transition-all duration-200 ${activeClass}">
                        <span class="text-[10px] font-medium opacity-90">Day ${d.day}</span>
                        <span class="text-sm font-bold">${d.date.split('(')[0]}</span>
                    </button>`;
            }).join('');
        }

        function renderItinerary(dayId) {
            const list = document.getElementById('itinerary-list');
            const dayData = DATA.days.find(d => d.day === dayId);
            const items = DATA.activities.filter(a => a.dayId === dayId);

            let html = `
                <div class="mb-4 px-1">
                    <h2 class="text-2xl font-bold text-gray-800">${dayData.title}</h2>
                    <p class="text-sm text-gray-500 mt-1 flex items-center gap-1">${dayData.date}</p>
                </div>
            `;

            if (items.length === 0) {
                html += `<div class="p-8 text-center text-gray-400 bg-white rounded-xl border border-dashed border-gray-300">Êú¨Êó•ÁÑ°ÁâπÂÆöË°åÁ®ã</div>`;
            } else {
                html += items.map((item, index) => {
                    const isLast = index === items.length - 1;
                    const typeColor = getTypeColor(item.type);
                    const typeIcon = getTypeIcon(item.type);
                    const transportBadge = item.tag ? `<div class="bg-blue-50 px-3 py-1.5 border-b border-blue-100 flex items-center gap-1 text-xs font-bold text-blue-700">${item.tag}</div>` : '';
                    
                    // Charter highlight
                    const charterClass = item.charter ? 'border-2 border-l-4 border-blue-200 bg-blue-50/20' : '';
                    const importantStyle = item.important ? 'border-l-4 border-l-amber-400 bg-amber-50/40' : '';
                    const finalStyle = item.charter ? charterClass : importantStyle;

                    const mapBtn = item.map ? `
                        <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.map)}" target="_blank" onclick="event.stopPropagation()" class="p-2 bg-gray-100 rounded-full text-gray-500 hover:text-teal-600 hover:bg-teal-50 transition-colors shadow-sm">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        </a>
                    ` : '';
                    
                    const needToggle = item.desc.length > 30; 
                    const toggleIndicator = needToggle ? `
                        <div class="text-xs text-gray-400 mt-2 flex items-center gap-1 opacity-70">
                            <svg class="w-3 h-3 transition-transform duration-300 toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            <span class="toggle-text">Â±ïÈñãË©≥ÊÉÖ</span>
                        </div>
                    ` : '';

                    return `
                    <div class="relative pl-4">
                        ${!isLast ? '<div class="timeline-line"></div>' : ''}
                        <div class="relative bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-5 transition-all active:scale-[0.99] ${finalStyle}">
                            ${transportBadge}
                            <div class="p-4 flex gap-4" onclick="toggleDesc(this)">
                                <div class="flex flex-col items-center gap-1 min-w-[3.5rem] pt-1">
                                    <span class="text-sm font-black text-gray-700 tracking-tight">${item.time}</span>
                                    <div class="w-9 h-9 rounded-full flex items-center justify-center text-white shadow-md z-10" style="background-color: ${typeColor}">
                                        ${typeIcon}
                                    </div>
                                </div>
                                <div class="flex-1 min-w-0 pt-1">
                                    <div class="flex justify-between items-start">
                                        <h3 class="text-lg font-bold text-gray-800 leading-snug">${item.title}</h3>
                                        <div class="flex gap-2 shrink-0 ml-2">
                                            ${item.important ? '<span class="text-amber-500 animate-pulse text-lg" title="ÈáçË¶ÅÊèêÈÜí">‚ö†Ô∏è</span>' : ''}
                                            ${mapBtn}
                                        </div>
                                    </div>
                                    <div class="mt-1 text-sm text-gray-600 desc-text leading-relaxed">${item.desc}</div>
                                    ${toggleIndicator}
                                </div>
                            </div>
                        </div>
                    </div>
                    `;
                }).join('');
            }
            list.innerHTML = html;
        }

        function renderFlights() {
            const container = document.getElementById('view-flights');
            container.innerHTML = DATA.flights.map(f => `
                <div class="bg-white rounded-xl p-5 shadow-sm border border-gray-100 relative overflow-hidden mb-4">
                    <div class="absolute top-0 right-0 bg-blue-600 text-white text-xs px-3 py-1 rounded-bl-lg font-bold">${f.type}</div>
                    <div class="text-xs text-gray-500 font-bold mb-2">${f.date}</div>
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-center">
                            <div class="text-3xl font-black text-gray-800">${f.time.split('-')[0].trim()}</div>
                            <div class="text-xs text-gray-500 mt-1">${f.from}</div>
                        </div>
                        <div class="flex-1 flex flex-col items-center px-4">
                             <div class="text-xs text-blue-600 font-bold mb-1">${f.airline}</div>
                             <div class="w-full h-[1px] bg-gray-300 relative flex items-center justify-center"><div class="bg-white px-1 text-blue-400">‚úà</div></div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-black text-gray-800">${f.time.split('-')[1].trim()}</div>
                            <div class="text-xs text-gray-500 mt-1">${f.to}</div>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-3 rounded-lg text-xs text-blue-800 border border-blue-100">${f.note}</div>
                </div>
            `).join('');
        }

        function renderHotels() {
            const container = document.getElementById('view-hotels');
            container.innerHTML = DATA.hotels.map(h => `
                <div class="bg-white rounded-xl p-5 shadow-sm border border-gray-100 mb-4">
                    <div class="flex justify-between items-start mb-3">
                        <span class="bg-purple-100 text-purple-700 text-xs font-bold px-2 py-1 rounded">${h.location}</span>
                        <span class="text-xs text-gray-400 font-medium">${h.dates}</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2 leading-tight">${h.name}</h3>
                    <div class="flex items-center gap-2 text-xs text-gray-500 mb-4 bg-gray-50 p-2 rounded w-fit">
                        <span>In ${h.checkIn} / Out ${h.checkOut}</span>
                    </div>
                    <div class="text-sm text-gray-600 p-3 rounded border border-gray-100 mb-4 whitespace-pre-wrap leading-relaxed">${h.note}</div>
                    <div class="grid grid-cols-2 gap-3">
                        <a href="${h.mapLink}" target="_blank" class="flex items-center justify-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl text-sm font-medium transition-colors">üìç Âú∞Âúñ</a>
                        <button onclick="copyText('${h.name}')" class="flex items-center justify-center gap-2 bg-purple-50 hover:bg-purple-100 text-purple-700 py-3 rounded-xl text-sm font-medium transition-colors">üìã Ë§áË£Ω</button>
                    </div>
                </div>
            `).join('');
        }

        function toggleDesc(el) {
            const desc = el.querySelector('.desc-text');
            const icon = el.querySelector('.toggle-icon');
            const text = el.querySelector('.toggle-text');
            if(desc) {
                desc.classList.toggle('expanded');
                if (desc.classList.contains('expanded')) {
                    if(icon) icon.style.transform = 'rotate(180deg)';
                    if(text) text.innerText = 'Êî∂Ëµ∑';
                } else {
                    if(icon) icon.style.transform = 'rotate(0deg)';
                    if(text) text.innerText = 'Â±ïÈñãË©≥ÊÉÖ';
                }
            }
        }

        function copyText(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                alert('Â∑≤Ë§áË£Ω: ' + text);
            } catch (err) {
                alert('Ë§áË£ΩÂ§±Êïó');
            }
            document.body.removeChild(textArea);
        }

        function getTypeColor(type) {
            switch(type) {
                case 'transport': return '#3b82f6';
                case 'flight': return '#2563eb';
                case 'hotel': return '#a855f7';
                case 'food': return '#f97316';
                case 'shopping': return '#ec4899';
                default: return '#10b981';
            }
        }

        function getTypeIcon(type) {
            const icons = {
                transport: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>',
                flight: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>',
                hotel: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m8-2a2 2 0 100-4 2 2 0 000 4zm-6-4a2 2 0 110-4 2 2 0 010 4zm6-10a2 2 0 110-4 2 2 0 010 4zm-6 4a2 2 0 110-4 2 2 0 010 4z"></path></svg>',
                food: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>', 
                shopping: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>',
                activity: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'
            };
            return icons[type] || icons.activity;
        }
    </script>
</body>
</html>
